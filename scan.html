<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="cordova.js"></script>
</head>
<body>
    <script>
        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady() {
            // Now safe to use device APIs
          // Start a scan. Scanning will continue until something is detected or
// QRScanner.cancelScan() is called.
QRScanner.scan(displayContents);

function displayContents(err, text){
  if(err){
    // an error occurred, or the scan was canceled (error code 6)
  } else {
    // The scan completed, display the contents of the QR code:
    alert(text);
  }
}

// Make the webview transparent so the video preview is visible behind it.
QRScanner.show();
// Be sure to make any opaque HTML elements transparent here to avoid
// covering the video
        }
        function onDone(err, status){
            if (err) {
                console.error(err);
            }
            if (status.authorized) {
                console.log('Authorized');
                QRScanner.scan(displayContents);
                QRScanner.show();
            } else if (status.denied) {
            
            } 
        }
        function displayContents(err, text){
            if(err){
                // an error occurred, or the scan was canceled (error code 6)
            } else {
                // The scan completed, display the contents of the QR code:
                localStorage.setItem("code",text);
                QRscanner.hide();
                window.location.href ='index.html';
            }
        }
    </script>
</body>
</html>

